#í”ŒëŸ¬í„° #ëª¨ë°”ì¼ê°œë°œ

ìŠ¤í”„ë§ ì„œë²„ ì—°ë™ ì‘ì—…, 
todos crud, ì»¤ì„œ ê¸°ë°˜ í˜ì´ì§• ì²˜ë¦¬. 
jwt ì´ìš©í•´ì„œ, ì¸ì¦ í›„, ìš”ì²­ ë° ì‘ë‹µ 

ì¤€ë¹„ë¬¼ : ìŠ¤í”„ë§ ë°±ì—”ë“œ ì‘ì—…í•œ ì„œë²„ í•„ìš”. 
IDE : ì¸í…”ë¦¬ ì œì´
ë§ˆë¦¬ì•„ ë””ë¹„ ì‚¬ìš©ì¤‘. (ë„ì»¤ ì´ìš©, ë””ë¹„ ì„œë²„ ì¼œê¸°)
ê¹ƒ ì£¼ì†Œ : 
https://github.com/lsy3709/Server501_Test/tree/main/SpringBasic/api5012

ê¸°ëŠ¥ í™•ì¸
ì‹œìŠ¤í…œì´ jwt í† í° ì¸ì¦ í˜•ì‹ìœ¼ë¡œ ë˜ì–´ì„œ, 

ì¸ì¦ í™•ì¸ ë°©ë²•. 

í¬ìŠ¤íŠ¸ë§¨ìœ¼ë¡œ 

ë©”ì†Œë“œ : post 
ì£¼ì†Œ : http://localhost:8080/generateToken
raw -> json í˜•ì‹ìœ¼ë¡œ 
ì˜ˆì‹œ)
{
    "mid" : "lsy",
    "mpw" : "1234"
}

2

í¬ìŠ¤íŠ¸ë§¨ìœ¼ë¡œ 

ë©”ì†Œë“œ : post 
ì£¼ì†Œ : http://localhost:8080/member/register
raw -> json í˜•ì‹ìœ¼ë¡œ 

íšŒì› ê°€ì… í•„ìš”í•  ê²½ìš°. 

{
    "mid" :"admin",
    "mpw" : "1234"
}


ë¦¬í„´, ì•¡ì„¸ìŠ¤ í† í° ë°›ìœ¼ë©´ ì´ê±¸ë¡œ ì‘ì—…. 
ì˜ˆì‹œ)
{
     "accessToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJtaWQiOiJsc3kiLCJpYXQiOjE3NDM2Mzk0NzQsImV4cCI6MTc0MzcyNTg3NH0.Vlokf1ouEs5DFj9ho1OJSyHFt0yJQSA_EBwxvUHgzvY",
    "refreshToken": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJtaWQiOiJsc3kiLCJpYXQiOjE3NDM2Mzk0NzQsImV4cCI6MTc0NjIzMTQ3NH0.7_zbxf_eXzIPKHFIE9T05Hb0zMCnlsoBK0H1EsgslNw"
}

1 í¬ìŠ¤íŠ¸ë§¨ 

2 ìŠ¤ì›¨ê±° ì´ìš©. 
http://localhost:8080/swagger-ui/index.html

ìƒë‹¨ì˜ authorize ë¶€ë¶„ì— ì•¡ì„¸ìŠ¤ í† í° ì…ë ¥ í›„, 
ì•„ë˜ì˜ ë ˆìŠ¤íŠ¸ í…ŒìŠ¤íŠ¸ í™•ì¸ í•˜ë©´ë¨. 

=========================================================
í”ŒëŸ¬í„° , í™”ë©´ì‘ì—…, ì»¨íŠ¸ë¡¤ëŸ¬ ì‘ì—… í•„ìš”í•¨. 

í´ë” 
sample_routing -> todos_test ->
controller, screen í™”ë©´ ê°ê° í´ë” ìƒì„±. 

ì‘ì—…
1
ë¡œê·¸ì¸ ì‘ì—…, 

1)
ì»¨íŠ¸ë¡¤ëŸ¬
todos_login_controller.dart
import 'dart:convert';

import 'package:busanit501_flutter_test/sample_routing/main_screen.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:flutter_secure_storage/flutter_secure_storage.dart';
import 'package:http/http.dart' as http;

class LoginController extends ChangeNotifier {
  final TextEditingController idController = TextEditingController();
  final TextEditingController passwordController = TextEditingController();

  final FlutterSecureStorage secureStorage = const FlutterSecureStorage(); // ë³´ì•ˆ ì €ì¥ì†Œ
  // final String serverIp = "http://192.168.219.103:8080"; // ì„œë²„ ì£¼ì†Œ
  final String serverIp = "http://10.100.201.87:8080"; // ì„œë²„ ì£¼ì†Œ ë³€ê²½ í•„ìš”
  bool isLoading = false; // ë¡œê·¸ì¸ ë¡œë”© ìƒíƒœ
  bool isLoggedIn = false; // ë¡œê·¸ì¸ ì—¬ë¶€

  LoginController() {
    _checkLoginStatus(); // ìƒì„± ì‹œ ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
  }

  // ë¡œê·¸ì¸ ìš”ì²­ ë° JWT ì €ì¥
  Future<void> login(BuildContext context) async {
    String inputId = idController.text.trim();
    String inputPw = passwordController.text.trim();

    if (inputId.isEmpty || inputPw.isEmpty) {
      _showDialog(context, "ì˜¤ë¥˜", "ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
      return;
    }

    Map<String, String> loginData = {"mid": inputId, "mpw": inputPw};

    try {
      isLoading = true;
      notifyListeners(); // UI ì—…ë°ì´íŠ¸

      final response = await http.post(
        Uri.parse("$serverIp/generateToken"),
        headers: {"Content-Type": "application/json"},
        body: jsonEncode(loginData),
      );

      if (response.statusCode == 200) {
        final responseData = jsonDecode(response.body);

        String accessToken = responseData["accessToken"];
        String refreshToken = responseData["refreshToken"];

        // JWT í† í° ë³´ì•ˆ ì €ì¥ì†Œì— ì €ì¥
        await secureStorage.write(key: "accessToken", value: accessToken);
        await secureStorage.write(key: "refreshToken", value: refreshToken);
        await secureStorage.write(key: "mid", value: inputId); // ë¡œê·¸ì¸í•œ ID ì €ì¥

        // ì…ë ¥ë€ ì´ˆê¸°í™”
        clearInputFields();

        // ë¡œê·¸ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸
        isLoggedIn = true;
        notifyListeners();

        _showDialog(context, "ë¡œê·¸ì¸ ì„±ê³µ", "ë©”ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.");

        // ë¡œê·¸ì¸ ì„±ê³µ í›„ ë©”ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
        // âœ… ë¡œê·¸ì¸ í›„ ì´ì „ í™”ë©´ ì œê±° í›„ ë©”ì¸ í™”ë©´ ì´ë™
        Future.delayed(const Duration(seconds: 1), () {
          Navigator.pushAndRemoveUntil(
            context,
            MaterialPageRoute(builder: (context) => const MyMainScreen()),
                (Route<dynamic> route) => false, // ğŸ”¥ ì´ì „ ëª¨ë“  í™”ë©´ ì œê±°
          );
        });
      } else {
        _showDialog(context, "ë¡œê·¸ì¸ ì‹¤íŒ¨", "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.");
      }
    } catch (e) {
      _showDialog(context, "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜", "ì˜¤ë¥˜ ë°œìƒ: $e");
    } finally {
      isLoading = false;
      notifyListeners();
    }
  }
// ë¡œê·¸ì•„ì›ƒ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
  Future<void> showLogoutDialog(BuildContext context) async {
    return showDialog(
      context: context,
      builder: (BuildContext context) {
        return AlertDialog(
          title: const Text("ë¡œê·¸ì•„ì›ƒ í™•ì¸"),
          content: const Text("ì •ë§ ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"),
          actions: [
            TextButton(
              onPressed: () => Navigator.of(context).pop(), // ì·¨ì†Œ ë²„íŠ¼
              child: const Text("ì·¨ì†Œ"),
            ),
            TextButton(
              onPressed: () {
                Navigator.of(context).pop(); // ë‹¤ì´ì–¼ë¡œê·¸ ë‹«ê¸°
                logout(context); // ë¡œê·¸ì•„ì›ƒ ì‹¤í–‰
              },
              child: const Text("í™•ì¸", style: TextStyle(color: Colors.red)),
            ),
          ],
        );
      },
    );
  }

  // ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ (ì €ì¥ëœ ë¡œê·¸ì¸ ì •ë³´ ì‚­ì œ)
  Future<void> logout(BuildContext context) async {
    await secureStorage.delete(key: "accessToken");
    await secureStorage.delete(key: "refreshToken");
    await secureStorage.delete(key: "mid");

    // ë¡œê·¸ì¸ ìƒíƒœ ì—…ë°ì´íŠ¸
    isLoggedIn = false;
    notifyListeners();

    _showDialog(context, "ë¡œê·¸ì•„ì›ƒ","ì„±ê³µ");

    // ë©”ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™

    // âœ… ë¡œê·¸ì•„ì›ƒ í›„ ì´ì „ ëª¨ë“  í™”ë©´ ì œê±° í›„ ë©”ì¸ í™”ë©´ ì´ë™
    Navigator.pushAndRemoveUntil(
      context,
      MaterialPageRoute(builder: (context) => const MyMainScreen()),
          (Route<dynamic> route) => false, // ğŸ”¥ ì´ì „ ëª¨ë“  í™”ë©´ ì œê±°
    );

  }

  // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
  void clearInputFields() {
    idController.clear();
    passwordController.clear();
    notifyListeners();
  }

  // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ (ì•± ì‹¤í–‰ ì‹œ í˜¸ì¶œ)
  Future<void> _checkLoginStatus() async {
    String? mid = await secureStorage.read(key: "mid");
    isLoggedIn = mid != null;
    notifyListeners();
  }

  // ë³´ì•ˆ ì €ì¥ì†Œì—ì„œ JWT í† í° ê°€ì ¸ì˜¤ê¸°
  Future<String?> getAccessToken() async {
    return await secureStorage.read(key: "accessToken");
  }

  // ë³´ì•ˆ ì €ì¥ì†Œì—ì„œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸°
  Future<String?> getUserId() async {
    return await secureStorage.read(key: "mid"); // ì €ì¥ëœ ID ë¶ˆëŸ¬ì˜¤ê¸°
  }

  // ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ í•¨ìˆ˜
  void _showDialog(BuildContext context, String title, String message) {
    showDialog(
      context: context,
      builder: (BuildContext context) {
        return AlertDialog(
          title: Text(title),
          content: Text(message),
          actions: [
            TextButton(
              onPressed: () => Navigator.of(context).pop(),
              child: const Text("í™•ì¸"),
            ),
          ],
        );
      },
    );
  }
}

2)
í™”ë©´
todos_login.dart
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';

import '../controller/todos_login_controller.dart';

class LoginScreen extends StatelessWidget {
  const LoginScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final loginController = context.watch<LoginController>();

    return Scaffold(
      appBar: AppBar(title: const Text('ë¡œê·¸ì¸ í™”ë©´')),
      body: SafeArea(
        child: Padding(
          padding: const EdgeInsets.all(16.0),
          child: ListView(
            children: [
              const Center(child: FlutterLogo(size: 100)),
              const SizedBox(height: 16),
              TextField(
                controller: loginController.idController,
                decoration: const InputDecoration(labelText: 'ì•„ì´ë””'),
              ),
              const SizedBox(height: 16),
              TextField(
                controller: loginController.passwordController,
                obscureText: true,
                decoration: const InputDecoration(labelText: 'íŒ¨ìŠ¤ì›Œë“œ'),
              ),
              const SizedBox(height: 20),
              loginController.isLoading
                  ? const CircularProgressIndicator()
                  : ElevatedButton(
                onPressed: () => loginController.login(context),
                child: const Text('ë¡œê·¸ì¸'),
              ),
            ],
          ),
        ),
      ),
    );
  }
}

3)
í”„ë¡œë°”ì´ë” ë©”ì¸ì— ë“±ë¡ ì‘ì—…. 
import 'package:busanit501_flutter_test/sample_routing/login_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_app_routing.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/pd_test_controller/food_controller.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/controller/todos_login_controller.dart';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';


void main() {
  // runApp(MyApp());
  // í”„ë¡œë°”ì´ë” ë“±ë¡ ì‘ì—…,
  // runApp(MyAppRouting());
  runApp(
    MultiProvider(
        providers: [
          ChangeNotifierProvider(create: (context) => FoodController()),
          ChangeNotifierProvider(create: (context) => LoginController())
        ],
    child: const MyAppRouting(),)
  );
}









4) 
ë¡œê·¸ì¸ì˜ ë¼ìš°íŒ… ë³€ê²½ ë˜ëŠ” ì¶”ê°€. 
import 'package:busanit501_flutter_test/sample_routing/login_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/main_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen2.dart';
import 'package:busanit501_flutter_test/sample_routing/pd_test_screen/my_pd_test_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/signup_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_login.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

class MyAppRouting extends StatelessWidget {
  const MyAppRouting({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      // ì‹œì‘ í•˜ëŠ” í™”ë©´ì„, ìŠ¤í”Œë˜ì‰¬ í™”ë©´ìœ¼ë¡œ êµì²´,
      home: const MySplashScreen2(),
      //ë¼ìš°íŒ… ì¤€ë¹„ë¬¼ 1,
      routes: {
        '/main': (context) => const MyMainScreen(),
        '/signup': (context) => const MySignUpScreen(),
		// ë¡œê·¸ì¸ í™”ë©´ êµì²´ ì‘ì—…í•¨
        '/login': (context) => const LoginScreen(),
        '/pdtest1': (context) => const MyPdTestScreen(),
      },
    );
  }
}

============================================

ë¡œê·¸ì¸ í›„, ë©”ì¸ì— ë¡œê·¸ì¸í•œ ìœ ì € í‘œê¸°. 
ì•ˆì „ ì €ì¥ì†Œì—ì„œ, ì €ì¥ëœ ìœ ì €ëª…ì„ í™”ë©´ì— í‘œê¸°í•˜ê¸°. 
ë©”ì¸ ìŠ¤í¬ë¦°ì„ ê¸°ì¡´ ìŠ¤í…Œì´íŠ¸ ë¦¬ìŠ¤ -> ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ 
í™”ë©´ì´ ë³€ê²½ì´ ë˜ëŠ” - ìŠ¤í…Œì´íŠ¸ í’€ ìœ„ì ¯ìœ¼ë¡œ ë³€ê²½. 

ì‘ì—…. 

ì‚¬ì „ ì‘ì—…, 
ì•ˆì „ ì €ì¥ì†Œ ê°ì²´ ìƒì„± ë°, ê¸°ë³¸ crd 
//
í”ŒëŸ¬í„° ì „ìš©ì˜ ì €ì¥ì†Œì— ì ‘ê·¼ í•˜ëŠ” ë„êµ¬, ê°€ì ¸ì˜¤ê¸°, ì„¤ì •í•˜ê¸°. 
final FlutterSecureStorage secureStorage = const FlutterSecureStorage();

1) ì“°ê¸° ì‘ì—…. 
secureStorage.write(key: "accessToken", value: accessToken);

2) ì½ê¸° ì‘ì—…. 
secureStorage.read(key: "mid");

3) ì‚­ì œ ì‘ì—…
secureStorage.delete(key: "accessToken");

1
todos_main_screen.dart ë§Œë“¤ê¸°. 
ì˜ˆì‹œ)
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:flutter_secure_storage/flutter_secure_storage.dart';
import 'package:provider/provider.dart';

import '../controller/todos_login_controller.dart';

class TodosMainScreen extends StatefulWidget {
  const TodosMainScreen({super.key});

  @override
  State<TodosMainScreen> createState() => _TodosMainScreenState();
}

class _TodosMainScreenState extends State<TodosMainScreen> {
  // í”ŒëŸ¬í„° ì „ìš©ì˜ ì €ì¥ì†Œì— ì ‘ê·¼ í•˜ëŠ” ë„êµ¬, ê°€ì ¸ì˜¤ê¸°, ì„¤ì •í•˜ê¸°.
  final FlutterSecureStorage secureStorage = const FlutterSecureStorage();
  String? userId;

  @override
  void initState() {
    super.initState();
    _loadUserId();
  }

  // ë³´ì•ˆ ì €ì¥ì†Œì—ì„œ ë¡œê·¸ì¸í•œ ìœ ì € ID ë¶ˆëŸ¬ì˜¤ê¸°
  Future<void> _loadUserId() async {
    String? mid = await secureStorage.read(key: "mid"); // ì €ì¥ëœ ID ê°€ì ¸ì˜¤ê¸°
    // ë¦¬ì•¡íŠ¸ ë¹„ìŠ·í•œ êµ¬ì¡°ì´ê³ , ìŠ¤í…Œì´íŠ¸ ìƒíƒœê°€ ë³€ê²½ì´ ë˜ë©´, í™”ë©´ë„ ê°™ì´ ì—…ë°ì´íŠ¸
    setState(() {
      userId = mid;
    });
  }

  @override
  Widget build(BuildContext context) {
    final loginController = context.watch<LoginController>();
    
    return Scaffold(
      appBar: AppBar(title: const Text('ë©”ì¸ í™”ë©´'),
          actions: [
            // ë¡œê·¸ì¸ ìƒíƒœì¼ ë•Œë§Œ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í‘œì‹œ
            if (loginController.isLoggedIn)
              IconButton(
                icon: const Icon(Icons.logout),
                onPressed: () => loginController.showLogoutDialog(context),
              ),
          ]
      ),

      body: SafeArea(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            const Center(child: FlutterLogo(size: 100)),
            const SizedBox(height: 20),
            ElevatedButton(
              //ë¼ìš°íŒ… 2ë²ˆ ì§¸ ì¤€ë¹„ë¬¼,
              onPressed: () => Navigator.pushNamed(context, '/signup'),
              child: const Text('íšŒì› ê°€ì…'),
            ),
            OutlinedButton(
              onPressed: () => Navigator.pushNamed(context, '/login'),
              child: const Text('ë¡œê·¸ì¸'),
            ),
            OutlinedButton(
              onPressed: () => Navigator.pushNamed(context, '/pdtest1'),
              child: const Text('ê³µê³µë°ì´í„° ì—°ë™1'),
            ),

          ],
        ),
      ),
    );

  }
}


2
ë¼ìš°íŒ…ì˜ ê²½ë¡œ ë³€ê²½, 

class MyAppRouting extends StatelessWidget {
  const MyAppRouting({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      // ì‹œì‘ í•˜ëŠ” í™”ë©´ì„, ìŠ¤í”Œë˜ì‰¬ í™”ë©´ìœ¼ë¡œ êµì²´,
      home: const MySplashScreen2(),
      //ë¼ìš°íŒ… ì¤€ë¹„ë¬¼ 1,
      routes: {
        '/main': (context) => const TodosMainScreen(),
		
ì£¼ì˜ì‚¬í•­. 
todos_login_controller.dart
LoginController
ê¸°ì¡´ ë©”ì¸ì—ì„œ, ë³€ê²½ë˜ ë©”ì¸ìœ¼ë¡œ êµì²´ ì‘ì—…. í•´ì•¼í•¨. 
MaterialPageRoute(builder: (context) => const TodosMainScreen()),


==========================================

ë©”ì¸ í™”ë©´ì—ì„œ, 
ë¡œê·¸ì¸ í•œ ê²½ìš°ì— íŠ¹ì • ë²„íŠ¼ ë³´ì´ê²Œ í•˜ê¸°. 

todos_main_screen.dart
if (loginController.isLoggedIn)
  OutlinedButton(
              onPressed: () => Navigator.pushNamed(context, '/pdtest1'),
              child: const Text('ê³µê³µë°ì´í„° ì—°ë™1'),
            ),


==========================================
íšŒì› ê°€ì… 

1. 
ì»¨íŠ¸ë¡¤ëŸ¬
todos_signup_controller.dart

ex)
import 'dart:convert';

import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:http/http.dart' as http;

class SignupController extends ChangeNotifier {
  // ì…ë ¥ í•„ë“œ ì»¨íŠ¸ë¡¤ëŸ¬
  final TextEditingController idController = TextEditingController();
  final TextEditingController emailController = TextEditingController();
  final TextEditingController passwordController = TextEditingController();
  final TextEditingController passwordConfirmController = TextEditingController();

  bool isPasswordMatch = true; // íŒ¨ìŠ¤ì›Œë“œ ì¼ì¹˜ ì—¬ë¶€

  final String serverIp = "http://10.100.201.87:8080"; // ì„œë²„ ì£¼ì†Œ ë³€ê²½ í•„ìš”
  // final String serverIp = "http://192.168.219.103:8080"; // ì„œë²„ ì£¼ì†Œ ë³€ê²½ í•„ìš”

  // íŒ¨ìŠ¤ì›Œë“œ ì¼ì¹˜ ì—¬ë¶€ ê²€ì‚¬
  void validatePassword() {
    isPasswordMatch = passwordController.text == passwordConfirmController.text;
    notifyListeners();
  }

  // ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
  void showDialogMessage(BuildContext context, String title, String message) {
    showDialog(
      context: context,
      builder: (BuildContext context) {
        return AlertDialog(
          title: Text(title),
          content: Text(message),
          actions: [
            TextButton(
              onPressed: () => Navigator.of(context).pop(),
              child: const Text("í™•ì¸"),
            ),
          ],
        );
      },
    );
  }

  // í† ìŠ¤íŠ¸ ë©”ì‹œì§€ í‘œì‹œ
  void showToast(BuildContext context, String message) {
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(
        content: Text(message),
        duration: const Duration(seconds: 1),
      ),
    );
  }

  // ì•„ì´ë”” ì¤‘ë³µ ì²´í¬ ê¸°ëŠ¥
  Future<void> checkDuplicateId(BuildContext context) async {
    String inputId = idController.text.trim();
    if (inputId.isEmpty) {
      showDialogMessage(context, "ì˜¤ë¥˜", "ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
      return;
    }

    try {
      final response = await http.get(
        Uri.parse("$serverIp/member/check-mid?mid=$inputId"),
      );

      if (response.statusCode == 200) {
        showDialogMessage(context, "ì‚¬ìš© ê°€ëŠ¥", "ì´ ì•„ì´ë””ëŠ” ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
      } else if (response.statusCode == 409) {
        showDialogMessage(context, "ì¤‘ë³µëœ ì•„ì´ë””", "ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ì•„ì´ë””ì…ë‹ˆë‹¤.");
      } else {
        showDialogMessage(context, "ì˜¤ë¥˜", "ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.statusCode}");
      }
    } catch (e) {
      showDialogMessage(context, "ì˜¤ë¥˜", "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë°œìƒ: $e");
    }
  }

  // íšŒì› ê°€ì… ìš”ì²­
  Future<void> signup(BuildContext context) async {
    if (!isPasswordMatch) {
      showDialogMessage(context, "ì˜¤ë¥˜", "íŒ¨ìŠ¤ì›Œë“œê°€ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.");
      return;
    }

    String inputId = idController.text.trim();
    String inputPw = passwordController.text.trim();

    if (inputId.isEmpty || inputPw.isEmpty) {
      showToast(context, "ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
      return;
    }

    Map<String, String> userData = {"mid": inputId, "mpw": inputPw};

    try {
      final response = await http.post(
        Uri.parse("$serverIp/member/register"),
        headers: {"Content-Type": "application/json"},
        body: jsonEncode(userData),
      );

      if (response.statusCode == 200) {
        showToast(context, "íšŒì› ê°€ì… ì„±ê³µ!");
        Future.delayed(const Duration(seconds: 1), () {
          Navigator.pushReplacementNamed(context, "/main");
        });
      } else {
        showToast(context, "íšŒì› ê°€ì… ì‹¤íŒ¨: ${response.body}");
      }
    } catch (e) {
      showToast(context, "ì˜¤ë¥˜ ë°œìƒ: $e");
    }
  }
}



2.
í™”ë©´ 
todos_signup_screen.dart
ex)
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';

import '../controller/todos_signup_controller.dart';

class TodosSignupScreen extends StatelessWidget {
  const TodosSignupScreen({super.key});

  @override
  Widget build(BuildContext context) {
    // final signupController = Provider.of<SignupController>(context);
    final signupController = context.watch<SignupController>(); // ìƒíƒœ ë³€ê²½ ê°ì§€
    return Scaffold(
      appBar: AppBar(title: const Text('íšŒì› ê°€ì…')),
      body: SafeArea(
        child: Padding(
          padding: const EdgeInsets.all(16.0),
          child: ListView(
            children: [
              // ì•„ì´ë”” ì…ë ¥ í•„ë“œ + ì¤‘ë³µ ì²´í¬ ë²„íŠ¼
              Row(
                children: [
                  Expanded(
                    child: TextField(
                      controller: signupController.idController,
                      decoration: const InputDecoration(labelText: 'ì•„ì´ë””'),
                    ),
                  ),
                  const SizedBox(width: 10),
                  ElevatedButton(
                    onPressed: () => signupController.checkDuplicateId(context),
                    child: const Text('ì¤‘ë³µ ì²´í¬'),
                  ),
                ],
              ),
              const SizedBox(height: 16),

              // ì´ë©”ì¼ ì…ë ¥ í•„ë“œ
              TextField(
                controller: signupController.emailController,
                decoration: const InputDecoration(labelText: 'ì´ë©”ì¼'),
              ),
              const SizedBox(height: 16),

              // íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥ í•„ë“œ
              TextField(
                controller: signupController.passwordController,
                obscureText: true,
                decoration: InputDecoration(
                  labelText: 'íŒ¨ìŠ¤ì›Œë“œ',
                  enabledBorder: OutlineInputBorder(
                    borderSide: BorderSide(
                      color: signupController.passwordController.text.isNotEmpty
                          ? (signupController.isPasswordMatch ? Colors.green : Colors.red)
                          : Colors.grey, // âœ… ì…ë ¥ì´ ì—†ì„ ë•Œ ê¸°ë³¸ ìƒ‰ìƒ ìœ ì§€
                      width: 2.0,
                    ),
                  ),
                  focusedBorder: OutlineInputBorder(
                    borderSide: BorderSide(
                      color: signupController.passwordController.text.isNotEmpty
                          ? (signupController.isPasswordMatch ? Colors.green : Colors.red)
                          : Colors.grey, // âœ… ì…ë ¥ì´ ì—†ì„ ë•Œ ê¸°ë³¸ ìƒ‰ìƒ ìœ ì§€
                      width: 2.0,
                    ),
                  ),
                ),
                onChanged: (value) => signupController.validatePassword(),
              ),
              const SizedBox(height: 16),

// âœ… íŒ¨ìŠ¤ì›Œë“œ í™•ì¸ ì…ë ¥ í•„ë“œ
              TextField(
                controller: signupController.passwordConfirmController,
                obscureText: true,
                decoration: InputDecoration(
                  labelText: 'íŒ¨ìŠ¤ì›Œë“œ í™•ì¸',
                  enabledBorder: OutlineInputBorder(
                    borderSide: BorderSide(
                      color: signupController.passwordConfirmController.text.isNotEmpty
                          ? (signupController.isPasswordMatch ? Colors.green : Colors.red)
                          : Colors.grey, // âœ… ì…ë ¥ì´ ì—†ì„ ë•Œ ê¸°ë³¸ ìƒ‰ìƒ ìœ ì§€
                      width: 2.0,
                    ),
                  ),
                  focusedBorder: OutlineInputBorder(
                    borderSide: BorderSide(
                      color: signupController.passwordConfirmController.text.isNotEmpty
                          ? (signupController.isPasswordMatch ? Colors.green : Colors.red)
                          : Colors.grey, // âœ… ì…ë ¥ì´ ì—†ì„ ë•Œ ê¸°ë³¸ ìƒ‰ìƒ ìœ ì§€
                      width: 2.0,
                    ),
                  ),
                ),
                onChanged: (value) => signupController.validatePassword(),
              ),

              const SizedBox(height: 16),

              // íšŒì› ê°€ì… ë²„íŠ¼
              ElevatedButton(
                onPressed: () => signupController.signup(context),
                child: const Text('íšŒì› ê°€ì…'),
              ),
            ],
          ),
        ),
      ),
    );
  }
}



3. 
main.dart
í”„ë¡œë°”ì´ë” ë“±ë¡ 
ex)
import 'package:busanit501_flutter_test/sample_routing/login_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_app_routing.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/pd_test_controller/food_controller.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/controller/todos_login_controller.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/controller/todos_signup_controller.dart';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';


void main() {
  // runApp(MyApp());
  // í”„ë¡œë°”ì´ë” ë“±ë¡ ì‘ì—…,
  // runApp(MyAppRouting());
  runApp(
    MultiProvider(
        providers: [
          ChangeNotifierProvider(create: (context) => FoodController()),
          ChangeNotifierProvider(create: (context) => LoginController()),
          ChangeNotifierProvider(create: (context) => SignupController())
        ],
    child: const MyAppRouting(),)
  );
}





4. 
ë¼ìš°íŒ… ì‘ì—…. 
my_app_routing.dart

ex)
import 'package:busanit501_flutter_test/sample_routing/login_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/main_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/my_splash_screen2.dart';
import 'package:busanit501_flutter_test/sample_routing/pd_test_screen/my_pd_test_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/signup_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_login.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_main_screen.dart';
import 'package:busanit501_flutter_test/sample_routing/todos_test/screen/todos_signup_screen.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';

class MyAppRouting extends StatelessWidget {
  const MyAppRouting({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      // ì‹œì‘ í•˜ëŠ” í™”ë©´ì„, ìŠ¤í”Œë˜ì‰¬ í™”ë©´ìœ¼ë¡œ êµì²´,
      home: const MySplashScreen2(),
      //ë¼ìš°íŒ… ì¤€ë¹„ë¬¼ 1,
      routes: {
        '/main': (context) => const TodosMainScreen(),
        '/signup': (context) => const TodosSignupScreen(),
        '/login': (context) => const LoginScreen(),
        '/pdtest1': (context) => const MyPdTestScreen(),
      },
    );
  }
}

